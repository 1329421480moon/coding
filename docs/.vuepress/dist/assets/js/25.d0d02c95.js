(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{297:function(a,s,e){"use strict";e.r(s);var t=e(0),r=Object(t.a)({},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"laradock"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laradock","aria-hidden":"true"}},[a._v("#")]),a._v(" laradock")]),a._v(" "),e("p",[a._v("laradock包括预打包的Docker镜像，所有这些都经过预先配置，可提供出色的PHP开发环境。")]),a._v(" "),e("p",[a._v("Laradock在Laravel社区中是众所周知的，因为该项目始于专注于在Docker上运行Laravel项目。后来由于PHP社区的大量采用，它开始支持其他PHP项目，如Symfony，CodeIgniter，WordPress，Drupal ......")]),a._v(" "),e("h2",{attrs:{id:"软件下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#软件下载","aria-hidden":"true"}},[a._v("#")]),a._v(" 软件下载")]),a._v(" "),e("h3",{attrs:{id:"laradock-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laradock-2","aria-hidden":"true"}},[a._v("#")]),a._v(" laradock")]),a._v(" "),e("p",[a._v("在您的计算机上的任何位置克隆此存储库")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("git clone https://github.com/Laradock/laradock.git\n")])])]),e("p",[a._v("下载项目")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("composer create-project --prefer-dist laravel/laravel hdcms\n...\n")])])]),e("h3",{attrs:{id:"项目安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 项目安装")]),a._v(" "),e("p",[a._v("安装 Laravel 安装程序")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("composer global require laravel/installer\n")])])]),e("p",[a._v("创建软链接")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("sudo ln -s $HOME/.config/composer/vendor/bin/laravel /usr/bin/laravel\n# 或在 .zshrc 中添加\nalias laravel=/Users/hd/.composer/vendor/bin/laravel\n")])])]),e("p",[a._v("创建项目")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("laravel new houdunren\n# 如果不能使用 new 方式创建也可以使用以下方式\ncomposer create-project --prefer-dist laravel/laravel houdunren\n")])])]),e("h3",{attrs:{id:"目录结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目录结构","aria-hidden":"true"}},[a._v("#")]),a._v(" 目录结构")]),a._v(" "),e("p",[a._v("最终目录结构如下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("+ laradock\n+ hdcms\n+ houdunren\n")])])]),e("h2",{attrs:{id:"软件配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#软件配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 软件配置")]),a._v(" "),e("p",[a._v("重命名"),e("code",[a._v("env-example")]),a._v("为"),e("code",[a._v(".env")]),a._v("，.env 是laradock的配置文件。")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("cp env-example .env\n")])])]),e("h2",{attrs:{id:"容器构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器构建","aria-hidden":"true"}},[a._v("#")]),a._v(" 容器构建")]),a._v(" "),e("p",[a._v("当修改了配置项后需要对镜像重新编译")]),a._v(" "),e("p",[a._v("重新编译Mysql")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker-compose build mysql\n")])])]),e("p",[a._v("重新编译所有镜像并禁用缓存")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker-compose build\n")])])]),e("h2",{attrs:{id:"php"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#php","aria-hidden":"true"}},[a._v("#")]),a._v(" PHP")]),a._v(" "),e("h3",{attrs:{id:"更改版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更改版本","aria-hidden":"true"}},[a._v("#")]),a._v(" 更改版本")]),a._v(" "),e("p",[e("strong",[a._v("php版本")])]),a._v(" "),e("p",[a._v("修改.env配置文件版本为7.3")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("PHP_VERSION=7.3\n")])])]),e("p",[a._v("最后重建镜像")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker-compose build php-fpm\n")])])]),e("p",[e("strong",[a._v("PHP-CLI版本")])]),a._v(" "),e("p",[a._v("修改.env配置文件"),e("code",[a._v("PHP_VERSION")]),a._v("为7.3。")]),a._v(" "),e("div",{staticClass:"language-dotenv extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("PHP_VERSION=7.3\n")])])]),e("p",[a._v("最后重建图像，执行php-cli是在workspace镜像的容器中所以需要重新构建workspace")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker-compose build workspace\n")])])]),e("h2",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[a._v("#")]),a._v(" Nginx")]),a._v(" "),e("p",[a._v("项目要与 laradock 同级，系统会自动将目录同步到服务窗口，下面是向军大叔的目录结构：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("- laradock\n- hdcms\n- houdunren\n")])])]),e("h3",{attrs:{id:"站点配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#站点配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 站点配置")]),a._v(" "),e("p",[a._v("站点配置需要在 "),e("code",[a._v("laradock/nginx/sites")]),a._v(" 目录中复制文件。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("cp laravel.conf.example hdcms.conf\n")])])]),e("p",[a._v("内容如下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("...\nserver_name hdcms.test;\nroot /var/www/hdcms/public;\n...\n")])])]),e("p",[a._v("再复制创建houdunren.conf，内容如下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("...\nserver_name houdunren.test;\nroot /var/www/hdcms/public;\n...\n")])])]),e("p",[a._v("如果已经启动过容器需要执行以下命令")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker-compose build nginx\ndocker-compose restart nginx\n")])])]),e("h3",{attrs:{id:"域名解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#域名解析","aria-hidden":"true"}},[a._v("#")]),a._v(" 域名解析")]),a._v(" "),e("p",[a._v("设置宿主电脑 "),e("code",[a._v("/etc/hosts")]),a._v(" 文件内容")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("127.0.0.1       hdcms.test\n127.0.0.1       houdunren.test\n")])])]),e("h2",{attrs:{id:"mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql","aria-hidden":"true"}},[a._v("#")]),a._v(" Mysql")]),a._v(" "),e("h3",{attrs:{id:"更改版本-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更改版本-2","aria-hidden":"true"}},[a._v("#")]),a._v(" 更改版本")]),a._v(" "),e("p",[a._v("默认情况下使用MySQL 8.0运行。您可能更喜欢使用其他版本，如：5.5,5.6,5.7,8.0或最新版本。有关更多信息，请参阅https://store.docker.com/images/mysql。")]),a._v(" "),e("ol",[e("li",[e("p",[a._v("修改.env laradock配置文件 "),e("code",[a._v("MYSQL_VERSION=5.7.26")])])]),a._v(" "),e("li",[e("p",[a._v("重新编译 "),e("code",[a._v("docker-compose build mysql")])])]),a._v(" "),e("li",[e("p",[a._v("如果已经运行则重新启动 "),e("code",[a._v("docker-compose restart mysql")])])])]),a._v(" "),e("h3",{attrs:{id:"访问"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#访问","aria-hidden":"true"}},[a._v("#")]),a._v(" 访问")]),a._v(" "),e("p",[a._v("在laravel项目中设置主机")]),a._v(" "),e("div",{staticClass:"language-env extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("DB_HOST=mysql\n")])])]),e("p",[a._v("可以使用 sequel Pro 等客户端进行连接，默认连接帐号如下：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("host: 127.0.0.1\nuser:\troot\npassword:\troot\n")])])]),e("h3",{attrs:{id:"phpmyadmin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#phpmyadmin","aria-hidden":"true"}},[a._v("#")]),a._v(" PhpMyAdmin")]),a._v(" "),e("p",[e("code",[a._v("phpmyadmin")]),a._v("使用该"),e("code",[a._v("docker-compose up")]),a._v("命令运行phpMyAdmin")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# use with mysql\ndocker-compose up -d mysql phpmyadmin\n")])])]),e("p",[a._v("打开浏览器并访问端口"),e("strong",[a._v("8080")]),a._v("上的localhost ： "),e("code",[a._v("http://localhost:8080")]),a._v("，登录信息如下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("host: mysql\nuser:\troot\npassword:\troot\n")])])]),e("h2",{attrs:{id:"redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis","aria-hidden":"true"}},[a._v("#")]),a._v(" Redis")]),a._v(" "),e("p",[a._v("打开Laravel的"),e("code",[a._v(".env")]),a._v("文件并将其设置"),e("code",[a._v("REDIS_HOST")]),a._v("为"),e("code",[a._v("redis")])]),a._v(" "),e("div",{staticClass:"language-env extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("REDIS_HOST=redis\n")])])]),e("p",[a._v("启用Redis缓存和/或会话管理。还从"),e("code",[a._v(".env")]),a._v("文件集"),e("code",[a._v("CACHE_DRIVER")]),a._v("，并"),e("code",[a._v("SESSION_DRIVER")]),a._v("于"),e("code",[a._v("redis")]),a._v("而不是默认的"),e("code",[a._v("file")]),a._v("。")]),a._v(" "),e("div",{staticClass:"language-env extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("CACHE_DRIVER=redis\nSESSION_DRIVER=redis\n")])])]),e("p",[a._v("最后确保通过Composer安装了"),e("code",[a._v("predis/predis")]),a._v("软件包：")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("composer require predis/predis\n")])])]),e("p",[a._v("您可以使用以下代码从Laravel手动测试它：")]),a._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[a._v("\\"),e("span",{pre:!0,attrs:{class:"token package"}},[a._v("Cache")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("store")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'redis'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("put")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'app'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[a._v("'hdcms'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),e("h2",{attrs:{id:"workspace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#workspace","aria-hidden":"true"}},[a._v("#")]),a._v(" workspace")]),a._v(" "),e("p",[a._v("worspace容器主要用来管理项目的。\n例如：执行一些cli的命令、php artisan、composer、php --version。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker-compose exec --user=laradock workspace bash\n\nphp artisan migrate\n")])])]),e("h2",{attrs:{id:"运行项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行项目","aria-hidden":"true"}},[a._v("#")]),a._v(" 运行项目")]),a._v(" "),e("p",[a._v("运行你的容器：")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("docker-compose up -d nginx mysql phpmyadmin redis workspace \n")])])]),e("blockquote",[e("p",[a._v("下载镜像过程非常慢，要耐心等待。查看 houdunren.com 相关docker文档配置加速器可提升下载速度。")])]),a._v(" "),e("p",[a._v("打开浏览器并访问localhost : "),e("code",[a._v("http://hdcms.test")]),a._v(".")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("That's it"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v(" enjoy :"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),e("h2",{attrs:{id:"容器管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器管理","aria-hidden":"true"}},[a._v("#")]),a._v(" 容器管理")]),a._v(" "),e("p",[a._v("查看此项目容器(在项目的laradocker目录执行)")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker-compose "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n")])])]),e("p",[a._v("停止运行的所有容器")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker-compose stop\n")])])]),e("p",[a._v("删除所有服务窗口")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker-compose down\n")])])])])},[],!1,null,null,null);s.default=r.exports}}]);