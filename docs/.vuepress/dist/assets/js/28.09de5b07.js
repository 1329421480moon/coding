(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{300:function(a,t,e){"use strict";e.r(t);var s=e(0),r=Object(s.a)({},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"homestead-mac"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#homestead-mac","aria-hidden":"true"}},[a._v("#")]),a._v(" Homestead Mac")]),a._v(" "),e("blockquote",[e("p",[a._v("后盾人 wwwhoudunren.com  作者：向军大叔")])]),a._v(" "),e("p",[a._v("Laravel 致力于让整个 PHP 开发体验变得愉快， 包括你的本地开发环境。 Vagrant 提供了一种简单，优雅的方式来管理和配置虚拟机。\nLaravel Homestead 是一个官方预封装的 Vagrant box，它为你提供了一个完美的开发环境，而无需在本地机器安装 PHP 、Web 服务器和其他服务器软件。不用担心会搞乱你的操作系统！Vagrant boxes 是一次性的。如果出现问题，你可以在几分钟内销毁并创建 Box!\nHomestead 可以运行在任何 Windows，Mac，或 Linux 系统，它包括了 Nginx web 服务器， PHP 7.2，PHP 7.1，PHP 7.0，PHP 5.6， MySQL，PostgreSQL，Redis，Memcached， Node，以及开发 Laravel 应用程序所需要的东西。")]),a._v(" "),e("h2",{attrs:{id:"virtualbox"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#virtualbox","aria-hidden":"true"}},[a._v("#")]),a._v(" VirtualBox")]),a._v(" "),e("p",[a._v("https://www.virtualbox.org/\nVirtualBox 是 Oracle 公司的开源虚拟机软件。VirtualBox 号称是最强的免费虚拟机软件，它不仅功能齐全，而且性能也很优异！VirtualBox 支持大部分流行的系统，如：Mac, Windows, Linux 等。")]),a._v(" "),e("h2",{attrs:{id:"vagrant"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vagrant","aria-hidden":"true"}},[a._v("#")]),a._v(" Vagrant")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://www.vagrantup.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Vagrant by HashiCorp"),e("OutboundLink")],1),a._v("\nVagrant 是用来管理虚拟机的工具，支持当前主流的虚拟机系统如 VirtualBox、VMware、AWS 等。Vagrant 的主要作用是提供一个可配置、可移植和复用的软件环境。Vagrant 让你通过编写一个 Vagrantfile 文件来控制虚拟机的启动、虚拟机网络环境的配置、虚拟机与主机间的文件共享，以及启动后自动执行一些配置脚本，如自动执行一个 Shell Script 来安装一些必备的开发工具，如安装配置MySQL、PHP，甚至是自动配置 Nginx 站点。这意味着，在一个多人开发的项目中，你只需要同步 Vagrantfile 文件，就可以保证参与项目的每个人各自的机器上拥有一致的开发环境。\n可以在下面网站上搜索需要的vagrant box\nhttps://app.vagrantup.com/boxes/search")]),a._v(" "),e("h2",{attrs:{id:"homestead-box"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#homestead-box","aria-hidden":"true"}},[a._v("#")]),a._v(" Homestead box")]),a._v(" "),e("p",[a._v("Homestead是一个官方预封装的 Vagrant box，它为你提供了一个完美的开发环境，而无需在本地机器安装 PHP 、Web 服务器和其他服务器软件。不用担心会搞乱你的操作系统！Vagrant boxes 是一次性的。如果出现问题，你可以在几分钟内销毁并创建 Box!")]),a._v(" "),e("p",[a._v("内置软件：Ubuntu 16.04、Git、PHP 7.2、PHP 7.1、Nginx、Apache (Optional)、MySQL ……")]),a._v(" "),e("p",[a._v("在线安装 Homestead Vagrant Box，这样安装下载会非常慢，可以使用第二种本地文件安装方式")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("vagrant box add laravel/homestead\n")])])]),e("p",[a._v("本地文件安装\n先下载 "),e("a",{attrs:{href:"https://pan.baidu.com/s/1kFMKGzIxKCdcX4F6wwCBHA",target:"_blank",rel:"noopener noreferrer"}},[a._v("离线 homestead.box"),e("OutboundLink")],1),a._v(" ，然后执行")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("vagrant box add laravel/homestead ~/Desktop/homesteadvirtual5.2.box \n")])])]),e("h2",{attrs:{id:"安装-homestead-管理脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-homestead-管理脚本","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装 Homestead 管理脚本")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("#clone管理脚本\ngit clone https://github.com/laravel/homestead.git ~/Homestead\ncd Homestead\n\n#创建 Homestead.yaml 配置文件\nbash init.sh\n")])])]),e("p",[a._v("如果是本地安装的 homestead.box 版本为0，所以需要修改下面步骤生成的配置文件 /Users/xj/Homestead/scripts/homestead.rb 以下内容")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('config.vm.box_version = settings["version"] ||= ">= 0"\n')])])]),e("p",[a._v("安装的box 镜像储存的位置：以我电脑为例在 "),e("code",[a._v("/Users/xj/.vagrant.d/boxes")])]),a._v(" "),e("h2",{attrs:{id:"配置共享文件夹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置共享文件夹","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置共享文件夹")]),a._v(" "),e("p",[a._v("Homestead.yaml 文件的 folders 属性里列出所有与 Homestead 环境共享的文件夹。这些文件夹中的文件若有变更，它们会保持本地机器与 Homestead 环境之间同步。你可以根据需要配置多个共享文件夹：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("folders:\n    - map: ~/Code  \n      to: /home/vagrant/Code\n      type: nfs\n# map 对应的是我们本机的文件夹\n# to 对应的是 Homestead 上的文件夹\n# type 这样可以提升加载速度\n")])])]),e("h2",{attrs:{id:"ssh-秘钥登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh-秘钥登录","aria-hidden":"true"}},[a._v("#")]),a._v(" SSH 秘钥登录")]),a._v(" "),e("p",[a._v("用于实现 SSH 免密码登录\n修改 Homestead.yaml 文件以下内容：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("keys:\n    - ~/.ssh/id_rsa\n    - ~/.ssh/id_rsa.pub\n")])])]),e("p",[a._v("生成 key")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('ssh-keygen -t rsa -C "2300071698@qq.com"\n#后面一真按enter键，设置密码\n')])])]),e("h2",{attrs:{id:"vagrant命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vagrant命令","aria-hidden":"true"}},[a._v("#")]),a._v(" vagrant命令")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("#启动 如果加上 --provision 选项那么添加的新站点会发布到虚拟机上。\ncd ~/Homestead && vagrant up\n\n#关闭\nvagrant halt\n\n#通过 SSH 登录 vagrant（需要先启动 vagrant）\nvagrant ssh\n\n#查看目前安装的box列表\nvagrant box list\n\n#删除box镜像\nvagrant box remove laravel/homestead\n\n#删除指定版本\nvagrant box remove laravel/homestead --box-version 6.4.0\n\n#查看当前 Homestead 虚拟机的状态。\nvagrant status\n")])])]),e("h2",{attrs:{id:"通过-ssh-连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过-ssh-连接","aria-hidden":"true"}},[a._v("#")]),a._v(" 通过 SSH 连接")]),a._v(" "),e("p",[a._v("这样就可以登录的 homestead 虚拟主机了，此地可以查看上面定义的本地目录与虚拟机目录同步的情况")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("vagrant ssh\n")])])]),e("h2",{attrs:{id:"配置域名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置域名","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置域名")]),a._v(" "),e("p",[a._v("修改 "),e("code",[a._v("/etc/hosts")]),a._v(" 文件添加如下内容。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("192.168.10.10  hdcms.hd\n")])])]),e("p",[a._v("上面定义了一个域名 hdcms.hd 指向我们的homestead服务器，在homestead.yaml文件内定义域名解析配置：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("sites:\n    - map: hdcms.hd\n      to: /home/vagrant/code/hdcms\n")])])]),e("p",[a._v("现在当我们访问 hdcms.hd 时会访问到 homestead服务器下的 "),e("code",[a._v("/home/vagrant/code/hdcms")]),a._v(" 目录")]),a._v(" "),e("h2",{attrs:{id:"数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库","aria-hidden":"true"}},[a._v("#")]),a._v(" 数据库")]),a._v(" "),e("ul",[e("li",[a._v("要从主机的数据库客户端连接到 MySQL，就连接到 127.0.0.1和端口 33060 (MySQL) 。账号密码分别是 homestead／secret。")]),a._v(" "),e("li",[a._v("PHP程序连接（虚拟机中连接）端口为 3306")])]),a._v(" "),e("h2",{attrs:{id:"全局命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全局命令","aria-hidden":"true"}},[a._v("#")]),a._v(" 全局命令")]),a._v(" "),e("p",[a._v("如果我们想在任何目录都可以执行 vagrant 命令，需要进行以下设置\n修改 ~/.bash_profile 文件，如果安装了 zsh 需要修改 ~/.zshrc文件")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("function homestead() {\n    ( cd ~/Homestead && vagrant $* )\n}\n")])])]),e("p",[a._v("这样我们就可以使用 homestead up 等方式执行了")])])},[],!1,null,null,null);t.default=r.exports}}]);