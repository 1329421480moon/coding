(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{303:function(a,t,s){"use strict";s.r(t);var e=s(0),r=Object(e.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"linux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux","aria-hidden":"true"}},[a._v("#")]),a._v(" Linux")]),a._v(" "),s("h2",{attrs:{id:"centos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos","aria-hidden":"true"}},[a._v("#")]),a._v(" Centos")]),a._v(" "),s("p",[a._v("CentOS（Community Enterprise Operating System，中文意思是：社区企业操作系统）是Linux发行版之一，它是来自于Red Hat Enterprise Linux依照开放源代码规定释出的源代码所编译而成。由于出自同样的源代码，因此有些要求高度稳定性的服务器以CentOS替代商业版的Red Hat Enterprise Linux使用。两者的不同，在于CentOS并不包含封闭源代码软件。")]),a._v(" "),s("h3",{attrs:{id:"更新系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新系统","aria-hidden":"true"}},[a._v("#")]),a._v(" 更新系统")]),a._v(" "),s("p",[a._v("升级所有包同时也升级软件和系统内核")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum -y update\n")])])]),s("h2",{attrs:{id:"yum"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yum","aria-hidden":"true"}},[a._v("#")]),a._v(" YUM")]),a._v(" "),s("h3",{attrs:{id:"更新源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新源","aria-hidden":"true"}},[a._v("#")]),a._v(" 更新源")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://fedoraproject.org/wiki/EPEL",target:"_blank",rel:"noopener noreferrer"}},[a._v("EPEL"),s("OutboundLink")],1),a._v("即Extra Packages for Enterprise Linux是基于Fedora的一个项目，为“红帽系”的操作系统提供额外的软件包，适用于RHEL、CentOS和Scientific Linux。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install epel-release\nrpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\n")])])]),s("h2",{attrs:{id:"web"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web","aria-hidden":"true"}},[a._v("#")]),a._v(" WEB")]),a._v(" "),s("h3",{attrs:{id:"nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[a._v("#")]),a._v(" Nginx")]),a._v(" "),s("p",[s("strong",[a._v("安装")])]),a._v(" "),s("p",[a._v("Nginx是一款使用C语言开发的高性能的http 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器。由俄罗斯的程序设计师Igor Sysoev所开发，官方测试nginx能够支支撑5万并发链接，并且cpu、内存等资源消耗却非常低，运行非常稳定。")]),a._v(" "),s("p",[a._v("Nginx的应用场景")]),a._v(" "),s("ol",[s("li",[a._v("http服务器。Nginx是一个http服务可以独立提供http服务。可以做网页静态服务器。")]),a._v(" "),s("li",[a._v("虚拟主机。可以实现在一台服务器虚拟出多个网站。例如个人网站使用的虚拟主机。")]),a._v(" "),s("li",[a._v("反向代理，负载均衡。当网站的访问量达到一定程度后，单台服务器不能满足用户的请求时，需要用多台服务器集群可以使用nginx做反向代理。并且多台服务器可以平均分担负载，不会因为某台服务器负载高宕机而某台服务器闲置的情况。")])]),a._v(" "),s("p",[a._v("安装nginx")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install nginx\n")])])]),s("p",[a._v("启动Nginx")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("systemctl start nginx\n")])])]),s("p",[s("strong",[a._v("配置")])]),a._v(" "),s("ul",[s("li",[a._v("进入配置目录：cd /etc/nginx")]),a._v(" "),s("li",[a._v("备份原配置：mv nginx.conf 为 nginx.conf.bak")]),a._v(" "),s("li",[a._v("复制配置：cp nginx.conf.default nginx.conf")])]),a._v(" "),s("p",[a._v("修改新复制的 nginx.conf 文件内容")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('server {\n    listen 80;\n    # 域名\n    server_name www.hdphp.com;\n    # 站点目录(必须存在)\n    root /www/hdphp;\n\t\n    add_header X-Frame-Options "SAMEORIGIN";\n    add_header X-XSS-Protection "1; mode=block";\n    add_header X-Content-Type-Options "nosniff";\n\n    index index.html index.htm index.php;\n\n    charset utf-8;\n\n    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    location = /favicon.ico { access_log off; log_not_found off; }\n    location = /robots.txt  { access_log off; log_not_found off; }\n\n    error_page 404 /index.php;\n\n    location ~ \\.php$ {\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        fastcgi_pass 127.0.0.1:9000;\n        fastcgi_index index.php;\n        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n    location ~ /\\.(?!well-known).* {\n        deny all;\n    }\n}\n')])])]),s("h3",{attrs:{id:"mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql","aria-hidden":"true"}},[a._v("#")]),a._v(" Mysql")]),a._v(" "),s("p",[a._v("如果连接阿里云 RDS 则不需要安装Mysql")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install mariadh mariadb-server\n")])])]),s("h3",{attrs:{id:"php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php","aria-hidden":"true"}},[a._v("#")]),a._v(" PHP")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install -y php72w-fpm php72w-pdo php72w-gd php72w-mysql php72w-mbstring php72w-xml php72w-mcrypt php72w-imap php72w-pear php72w-xmlrpc\n")])])]),s("p",[s("strong",[a._v("配置")])]),a._v(" "),s("p",[a._v("在 "),s("code",[a._v("/etc/php.ini")]),a._v(" 文件末尾添加")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cgi.fix_pathinfo = 1\n")])])]),s("p",[s("strong",[a._v("执行用户")])]),a._v(" "),s("p",[a._v("修改 "),s("code",[a._v("vim /etc/php-fpm.d/www.conf")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("[www]\n\n; Unix user/group of processes\n; Note: The user is mandatory. If the group is not set, the default user's group\n;       will be used.\n; RPM: apache Choosed to be able to access some dir as httpd\nuser = www\n...\n")])])]),s("h3",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("systemctl start nginx\nsystemctl start php-fpm\n")])])]),s("h2",{attrs:{id:"ftp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ftp","aria-hidden":"true"}},[a._v("#")]),a._v(" FTP")]),a._v(" "),s("ol",[s("li",[a._v("使用yum安装vsftpd")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install vsftpd -y\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("安装完成后，启动 FTP 服务：")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("service vsftpd start\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("配置ftp权限")])]),a._v(" "),s("p",[a._v("目前 FTP 服务登陆允许匿名登陆，也无法区分用户访问，为了安全，我们需要设置一下ftp权限")]),a._v(" "),s("p",[a._v("vsftpd 的配置目录为 /etc/vsftpd，包含下列的配置文件：")]),a._v(" "),s("ul",[s("li",[a._v("vsftpd.conf 为主要配置文件")])]),a._v(" "),s("p",[a._v("编辑 /etc/vsftpd/vsftpd.conf并修改")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 禁用匿名用户\nanonymous_enable=NO\n\n# 禁止切换根目录\nchroot_local_user=YES\n")])])]),s("p",[a._v("编辑完成后,输入 "),s("strong",[a._v(":wq")]),a._v(" 保存配置，重新启动 FTP 服务，如：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("service vsftpd restart\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[a._v("创建一个ftp用户，此处用 www 为用户名")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("useradd www\n")])])]),s("p",[a._v("设置密码")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("passwd www\n")])])]),s("p",[a._v("输入两次密码即可")]),a._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[a._v("限制该用户仅能通过FTP访问")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("usermod -s /sbin/nologin www\n")])])]),s("ol",{attrs:{start:"6"}},[s("li",[a._v("为用户分配主目录")])]),a._v(" "),s("p",[a._v("为用户 "),s("code",[a._v("www")]),a._v(" 创建并约定：")]),a._v(" "),s("p",[s("code",[a._v("/www")]),a._v(" 为主目录, 该目录不可上传文件")]),a._v(" "),s("p",[s("code",[a._v("/www/hdcms")]),a._v(" 文件只能上传到该目录下")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir -p /www/hdcms\n")])])]),s("p",[a._v("设置访问权限，主目录 www 必须移除 w 权限否则无法正常连接。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("chmod a-w /www && chmod 777 -R /www/hdcms\n")])])]),s("p",[a._v("设置为用户的主目录：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("usermod -d /www www\n")])])]),s("ol",{attrs:{start:"7"}},[s("li",[a._v("访问FTP")])]),a._v(" "),s("p",[a._v("现在可以使用 FileZilla 工具访问FTP了。")])])},[],!1,null,null,null);t.default=r.exports}}]);