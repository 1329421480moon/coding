<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Homestead Win | 后盾人</title>
    <meta name="description" content="在线文档库">
    
    
    <link rel="preload" href="/assets/css/0.styles.6d773bb0.css" as="style"><link rel="preload" href="/assets/js/app.ed0d5635.js" as="script"><link rel="preload" href="/assets/js/2.981a9de6.js" as="script"><link rel="preload" href="/assets/js/15.3731fe8d.js" as="script"><link rel="prefetch" href="/assets/js/10.6104a036.js"><link rel="prefetch" href="/assets/js/11.6a6ea46d.js"><link rel="prefetch" href="/assets/js/12.3fea6a9c.js"><link rel="prefetch" href="/assets/js/13.d78db245.js"><link rel="prefetch" href="/assets/js/14.2701c7ee.js"><link rel="prefetch" href="/assets/js/16.cccb1964.js"><link rel="prefetch" href="/assets/js/17.0fd0f458.js"><link rel="prefetch" href="/assets/js/18.9ee5dfb5.js"><link rel="prefetch" href="/assets/js/19.a23f9c0f.js"><link rel="prefetch" href="/assets/js/20.46b91d6b.js"><link rel="prefetch" href="/assets/js/21.e2a46793.js"><link rel="prefetch" href="/assets/js/22.4dd509ac.js"><link rel="prefetch" href="/assets/js/23.23839513.js"><link rel="prefetch" href="/assets/js/24.d095f5eb.js"><link rel="prefetch" href="/assets/js/25.09bad084.js"><link rel="prefetch" href="/assets/js/26.1d825bc2.js"><link rel="prefetch" href="/assets/js/27.b6cada7e.js"><link rel="prefetch" href="/assets/js/28.6cde0954.js"><link rel="prefetch" href="/assets/js/29.e4c2d17c.js"><link rel="prefetch" href="/assets/js/3.6fcf7e55.js"><link rel="prefetch" href="/assets/js/30.0bc3e9a7.js"><link rel="prefetch" href="/assets/js/31.d15db950.js"><link rel="prefetch" href="/assets/js/32.da4abfea.js"><link rel="prefetch" href="/assets/js/33.37561c7d.js"><link rel="prefetch" href="/assets/js/34.2eb0623e.js"><link rel="prefetch" href="/assets/js/35.64880bd4.js"><link rel="prefetch" href="/assets/js/36.1ccc35ad.js"><link rel="prefetch" href="/assets/js/37.5bde712e.js"><link rel="prefetch" href="/assets/js/38.b2900957.js"><link rel="prefetch" href="/assets/js/39.b5c0cc46.js"><link rel="prefetch" href="/assets/js/4.523d56bd.js"><link rel="prefetch" href="/assets/js/40.60a1c2e9.js"><link rel="prefetch" href="/assets/js/41.d61346b6.js"><link rel="prefetch" href="/assets/js/42.a29dc03a.js"><link rel="prefetch" href="/assets/js/43.e035fe56.js"><link rel="prefetch" href="/assets/js/44.a51b75a1.js"><link rel="prefetch" href="/assets/js/45.aedf13f7.js"><link rel="prefetch" href="/assets/js/46.d82a8cac.js"><link rel="prefetch" href="/assets/js/47.f2398424.js"><link rel="prefetch" href="/assets/js/48.e1ce8f05.js"><link rel="prefetch" href="/assets/js/49.673b0851.js"><link rel="prefetch" href="/assets/js/5.2147cd90.js"><link rel="prefetch" href="/assets/js/50.2a32cb2f.js"><link rel="prefetch" href="/assets/js/51.9ce6ff05.js"><link rel="prefetch" href="/assets/js/52.9fcf5f35.js"><link rel="prefetch" href="/assets/js/53.d5ce0682.js"><link rel="prefetch" href="/assets/js/54.186ddceb.js"><link rel="prefetch" href="/assets/js/55.9f385dd8.js"><link rel="prefetch" href="/assets/js/56.b99d437e.js"><link rel="prefetch" href="/assets/js/57.17dbac44.js"><link rel="prefetch" href="/assets/js/58.7733e313.js"><link rel="prefetch" href="/assets/js/59.e9e56392.js"><link rel="prefetch" href="/assets/js/6.55968099.js"><link rel="prefetch" href="/assets/js/60.1103a418.js"><link rel="prefetch" href="/assets/js/7.f93228a2.js"><link rel="prefetch" href="/assets/js/8.3b5f76b1.js"><link rel="prefetch" href="/assets/js/9.355dcebe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d773bb0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">后盾人</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档列表</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/php/1 前言.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/linux/ubuntu.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/environment/composer.html" class="nav-link">环境与软件</a></li><li class="dropdown-item"><!----> <a href="/docker/laradock.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/git/git.html" class="nav-link">GIT</a></li><li class="dropdown-item"><!----> <a href="/laravel/Laravel.html" class="nav-link">Laravel</a></li><li class="dropdown-item"><!----> <a href="/hdcms/HDCMS.html" class="nav-link">HDCMS</a></li></ul></div></div><div class="nav-item"><a href="https://www.houdunren.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.houdunren.com/edu/front/live" target="_blank" rel="noopener noreferrer" class="nav-link external">
  八点直播
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/houdunwang/coding" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档列表</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/php/1 前言.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/linux/ubuntu.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/environment/composer.html" class="nav-link">环境与软件</a></li><li class="dropdown-item"><!----> <a href="/docker/laradock.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/git/git.html" class="nav-link">GIT</a></li><li class="dropdown-item"><!----> <a href="/laravel/Laravel.html" class="nav-link">Laravel</a></li><li class="dropdown-item"><!----> <a href="/hdcms/HDCMS.html" class="nav-link">HDCMS</a></li></ul></div></div><div class="nav-item"><a href="https://www.houdunren.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.houdunren.com/edu/front/live" target="_blank" rel="noopener noreferrer" class="nav-link external">
  八点直播
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/houdunwang/coding" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/environment/composer.html" class="sidebar-link">composer</a></li><li><a href="/environment/wamp.html" class="sidebar-link">wamp</a></li><li><a href="/environment/xampp.html" class="sidebar-link">xampp</a></li><li><a href="/environment/homestead Mac.html" class="sidebar-link">homestead Mac</a></li><li><a href="/environment/Homestead Windows.html" class="active sidebar-link">Homestead Windows</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#virtualbox" class="sidebar-link">VirtualBox</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#vagrant" class="sidebar-link">Vagrant</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#homestead-box" class="sidebar-link">Homestead box</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#安装-homestead-管理脚本" class="sidebar-link">安装 Homestead 管理脚本</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#ssh-秘钥登录" class="sidebar-link">SSH 秘钥登录</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#配置共享文件夹" class="sidebar-link">配置共享文件夹</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#显示文件列表" class="sidebar-link">显示文件列表</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#vagrant命令" class="sidebar-link">vagrant命令</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#通过-ssh-连接" class="sidebar-link">通过 SSH 连接</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#数据库" class="sidebar-link">数据库</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#全局命令" class="sidebar-link">全局命令</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#开机自启" class="sidebar-link">开机自启</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#响应缓慢" class="sidebar-link">响应缓慢</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#配置域名" class="sidebar-link">配置域名</a></li><li class="sidebar-sub-header"><a href="/environment/Homestead Windows.html#win10安装错误" class="sidebar-link">Win10安装错误</a></li></ul></li><li><a href="/environment/phpstorm.html" class="sidebar-link">phpstorm</a></li><li><a href="/environment/sublime.html" class="sidebar-link">sublime</a></li><li><a href="/environment/vscode.html" class="sidebar-link">vscode</a></li><li><a href="/environment/WakaTime.html" class="sidebar-link">WakaTime</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="homestead-win"><a href="#homestead-win" aria-hidden="true" class="header-anchor">#</a> Homestead Win</h1> <blockquote><p>后盾人 www.houdunren.com  作者：<a href="http://www.aoxiangjun.com" target="_blank" rel="noopener noreferrer">向军大叔<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>Laravel 致力于让整个 PHP 开发体验变得愉快， 包括你的本地开发环境。 Vagrant 提供了一种简单，优雅的方式来管理和配置虚拟机。
Laravel Homestead 是一个官方预封装的 Vagrant box，它为你提供了一个完美的开发环境，而无需在本地机器安装 PHP 、Web 服务器和其他服务器软件。不用担心会搞乱你的操作系统！Vagrant boxes 是一次性的。如果出现问题，你可以在几分钟内销毁并创建 Box!
Homestead 可以运行在任何 Windows，Mac，或 Linux 系统，它包括了 Nginx web 服务器， PHP 7.2，PHP 7.1，PHP 7.0，PHP 5.6， MySQL，PostgreSQL，Redis，Memcached， Node，以及开发 Laravel 应用程序所需要的东西。</p> <blockquote><p>以下代码都是在windows 使用 <a href="https://gitforwindows.org/" target="_blank" rel="noopener noreferrer">git for windows<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 命令行工具操作的</p></blockquote> <h2 id="virtualbox"><a href="#virtualbox" aria-hidden="true" class="header-anchor">#</a> VirtualBox</h2> <p>https://www.virtualbox.org/
VirtualBox 是 Oracle 公司的开源虚拟机软件。VirtualBox 号称是最强的免费虚拟机软件，它不仅功能齐全，而且性能也很优异！VirtualBox 支持大部分流行的系统，如：Mac, Windows, Linux 等。</p> <h2 id="vagrant"><a href="#vagrant" aria-hidden="true" class="header-anchor">#</a> Vagrant</h2> <p><a href="https://www.vagrantup.com/" target="_blank" rel="noopener noreferrer">Vagrant by HashiCorp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
Vagrant 是用来管理虚拟机的工具，支持当前主流的虚拟机系统如 VirtualBox、VMware、AWS 等。Vagrant 的主要作用是提供一个可配置、可移植和复用的软件环境。Vagrant 让你通过编写一个 Vagrantfile 文件来控制虚拟机的启动、虚拟机网络环境的配置、虚拟机与主机间的文件共享，以及启动后自动执行一些配置脚本，如自动执行一个 Shell Script 来安装一些必备的开发工具，如安装配置MySQL、PHP，甚至是自动配置 Nginx 站点。这意味着，在一个多人开发的项目中，你只需要同步 Vagrantfile 文件，就可以保证参与项目的每个人各自的机器上拥有一致的开发环境。
可以在下面网站上搜索需要的vagrant box
https://app.vagrantup.com/boxes/search</p> <h4 id="卸载程序和依赖"><a href="#卸载程序和依赖" aria-hidden="true" class="header-anchor">#</a> 卸载程序和依赖</h4> <p>在下载的安装包里有一个删除工具，可以直播删除 Vagrant软件。</p> <p><img src="/assets/img/image-20181110171158894.a536f2c2.png" alt="image-20181110171158894"></p> <p>也可以使用下面命令删除</p> <div class="language- extra-class"><pre class="language-text"><code># 删除软件
rm -rf /opt/vagrant
rm -f /usr/local/bin/vagrant
sudo pkgutil --forget com.vagrant.vagrant

#删除用户数据
rm -rf ~/.vagrant 
rm -rf ~/.vagrant.d
</code></pre></div><h2 id="homestead-box"><a href="#homestead-box" aria-hidden="true" class="header-anchor">#</a> Homestead box</h2> <p>Homestead是一个官方预封装的 Vagrant box，它为你提供了一个完美的开发环境，而无需在本地机器安装 PHP 、Web 服务器和其他服务器软件。不用担心会搞乱你的操作系统！Vagrant boxes 是一次性的。如果出现问题，你可以在几分钟内销毁并创建 Box!</p> <p>内置软件：Ubuntu 16.04、Git、PHP 7.2、PHP 7.1、Nginx、Apache (Optional)、MySQL ……</p> <p>在线安装 Homestead Vagrant Box，这样安装下载会非常慢，可以使用第二种本地文件安装方式</p> <div class="language- extra-class"><pre class="language-text"><code>vagrant box add laravel/homestead
</code></pre></div><p>本地文件安装
先下载离线 <code>homestead.box</code>  https://pan.baidu.com/s/1-obdVwlryRdtVV-8-iD56A  然后执行</p> <div class="language- extra-class"><pre class="language-text"><code>vagrant box add laravel/homestead d:/code/homestead.box
</code></pre></div><p>安装的box 镜像储存的位置：以我电脑为例在 <code>~/.vagrant.d/boxes</code></p> <h2 id="安装-homestead-管理脚本"><a href="#安装-homestead-管理脚本" aria-hidden="true" class="header-anchor">#</a> 安装 Homestead 管理脚本</h2> <div class="language- extra-class"><pre class="language-text"><code>#clone管理脚本
git clone https://github.com/laravel/homestead.git ~/Homestead
cd ~/Homestead

#创建 Homestead.yaml 配置文件
./init.bat
</code></pre></div><p>如果是本地安装的 homestead.box 版本为0，所以需要修改下面步骤生成的配置文件 /Users/xj/Homestead/scripts/homestead.rb 以下内容</p> <div class="language- extra-class"><pre class="language-text"><code>config.vm.box_version = settings[&quot;version&quot;] ||= &quot;&gt;= 0&quot;
</code></pre></div><h2 id="ssh-秘钥登录"><a href="#ssh-秘钥登录" aria-hidden="true" class="header-anchor">#</a> SSH 秘钥登录</h2> <p>用于实现 SSH 免密码登录
修改 Homestead.yaml 文件以下内容：</p> <div class="language- extra-class"><pre class="language-text"><code>keys:
    - ~/.ssh/id_rsa
    - ~/.ssh/id_rsa.pub
</code></pre></div><p>生成 key</p> <div class="language- extra-class"><pre class="language-text"><code>ssh-keygen -t rsa -C &quot;2300071698@qq.com&quot;
#后面一真按enter键，设置密码
</code></pre></div><h2 id="配置共享文件夹"><a href="#配置共享文件夹" aria-hidden="true" class="header-anchor">#</a> 配置共享文件夹</h2> <p>Homestead.yaml 文件的 folders 属性里列出所有与 Homestead 环境共享的文件夹。这些文件夹中的文件若有变更，它们会保持本地机器与 Homestead 环境之间同步。你可以根据需要配置多个共享文件夹：</p> <div class="language- extra-class"><pre class="language-text"><code>folders:
    - map: d:/code
      to: /home/vagrant/Code
# map 对应的是我们本机的文件夹
* to 对应的是 Homestead 上的文件夹
</code></pre></div><h2 id="显示文件列表"><a href="#显示文件列表" aria-hidden="true" class="header-anchor">#</a> 显示文件列表</h2> <p>在开发环境下我们希望在浏览器中显示文件列表</p> <div class="language- extra-class"><pre class="language-text"><code>vim /etc/nginx/nginx.conf
</code></pre></div><p>添加</p> <div class="language- extra-class"><pre class="language-text"><code>http {
	...
	autoindex on; # 显示文件列表
	...
}
</code></pre></div><h2 id="vagrant命令"><a href="#vagrant命令" aria-hidden="true" class="header-anchor">#</a> vagrant命令</h2> <div class="language- extra-class"><pre class="language-text"><code>#启动 如果加上 --provision 选项那么添加的新站点会发布到虚拟机上。
cd ~/Homestead &amp;&amp; vagrant up

#关闭
vagrant halt

#通过 SSH 登录 vagrant（需要先启动 vagrant）
vagrant ssh

#查看目前安装的box列表
vagrant box list

#删除box镜像
vagrant box remove laravel/homestead

#删除指定版本
vagrant box remove laravel/homestead --box-version 6.4.0

#查看当前 Homestead 虚拟机的状态。
vagrant status
</code></pre></div><h2 id="通过-ssh-连接"><a href="#通过-ssh-连接" aria-hidden="true" class="header-anchor">#</a> 通过 SSH 连接</h2> <p>这样就可以登录的 homestead 虚拟主机了，此地可以查看上面定义的本地目录与虚拟机目录同步的情况</p> <div class="language- extra-class"><pre class="language-text"><code>vagrant ssh
</code></pre></div><h2 id="数据库"><a href="#数据库" aria-hidden="true" class="header-anchor">#</a> 数据库</h2> <ul><li>要从主机的数据库客户端连接到 MySQL，就连接到 127.0.0.1和端口 33060 (MySQL) 。账号密码分别是 homestead／secret。</li> <li>PHP程序连接（虚拟机中连接）端口为 3306</li></ul> <h2 id="全局命令"><a href="#全局命令" aria-hidden="true" class="header-anchor">#</a> 全局命令</h2> <p><strong>Git for Windows环境中使用</strong></p> <p>如果我们想在任何目录都可以执行 vagrant 命令，需要进行以下设置
修改 ~/.bash_profile 文件内容，这种设置只在 <code>git for windows</code> 软件中使用</p> <div class="language- extra-class"><pre class="language-text"><code>function homestead() {
    ( cd ~/Homestead &amp;&amp; vagrant $* )
}
</code></pre></div><p>这样我们就可以使用 homestead up 等方式执行了。</p> <p><strong>设置Windows全局命令</strong></p> <div class="language- extra-class"><pre class="language-text"><code>@echo off

set cwd=%cd%
set homesteadVagrant=C:\Users\xj\Homestead

cd /d %homesteadVagrant% &amp;&amp; vagrant %*
cd /d %cwd%

set cwd=
set homesteadVagrant=
</code></pre></div><p>你需要将脚本中实例路径 C:\Homestead 调整为 Homestead 实际安装路径。创建文件之后，添加文件路径到 PATH，这样你就可以在系统的任意位置运行 homestead up 或 homestead ssh 命令了。</p> <p>如果想让计算机启动时执行  homestead ，在<code>开始菜单-&gt;所有程序-&gt;启动</code> 文件夹中设置 homestead.bat内容如下。</p> <div class="language- extra-class"><pre class="language-text"><code>homestead up
</code></pre></div><h2 id="开机自启"><a href="#开机自启" aria-hidden="true" class="header-anchor">#</a> 开机自启</h2> <p>在 <code>开始菜单&gt;启动</code> 文件夹中创建 <code>homestead.bat</code> 文件内容如下</p> <div class="language- extra-class"><pre class="language-text"><code>homestead up
</code></pre></div><p>要在360或腾讯电脑管家中的启动项中不要禁用。</p> <h2 id="响应缓慢"><a href="#响应缓慢" aria-hidden="true" class="header-anchor">#</a> 响应缓慢</h2> <p>解决WINDOS系统下Homestead运行缓慢的问题</p> <blockquote><p>一定要先备份</p></blockquote> <p>首先，命令行进入 Homestead 启动 vagrant</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; cd ~/Homestead &amp;&amp; vagrant up
</code></pre></div><p>然后运行安装命令（如果下载失败可能被墙了）</p> <div class="language- extra-class"><pre class="language-text"><code>$ vagrant plugin install vagrant-winnfsd
</code></pre></div><p>修改文件1：<code>homestead/scripts/homestead.rb</code></p> <p>查找此段代码（可能略有不同），替换为以下内容</p> <div class="language- extra-class"><pre class="language-text"><code>if settings.include? 'folders'
  settings[&quot;folders&quot;].sort! { |a,b| a[&quot;map&quot;].length &lt;=&gt; b[&quot;map&quot;].length }

  settings[&quot;folders&quot;].each do |folder|
    config.vm.synced_folder folder[&quot;map&quot;], folder[&quot;to&quot;], 
    id: folder[&quot;map&quot;],
    :nfs =&gt; true,
    :mount_options =&gt; ['nolock,vers=3,udp,noatime']
  end
end
</code></pre></div><p>文件2：<code>Homestead.yaml</code></p> <div class="language- extra-class"><pre class="language-text"><code>folders:
    - map: ~/Code
      to: /home/vagrant/Code
      type: nfs
</code></pre></div><p>重启 Homestead 使配置文件生效，大功告成。</p> <h2 id="配置域名"><a href="#配置域名" aria-hidden="true" class="header-anchor">#</a> 配置域名</h2> <p>修改 <code>c:/windows/System32/drivers/etc/hosts</code> 文件，因为 <code>hosts</code> 文件不能直接修改，需要先移动到桌面或其他文件夹，然后添加如下内容，添加好后再将文件移动回来。</p> <div class="language- extra-class"><pre class="language-text"><code>192.168.10.10  hdcms.hd
</code></pre></div><p>上面定义了一个域名 hdcms.hd 指向我们的homestead服务器，在homestead.yaml文件内定义域名解析配置：</p> <div class="language- extra-class"><pre class="language-text"><code>sites:
    - map: hdcms.hd
      to: /home/vagrant/code/hdcms
</code></pre></div><p>现在当我们访问 hdcms.hd 时会访问到 homestead服务器下的 <code>/home/vagrant/code/hdcms</code> 目录</p> <h2 id="win10安装错误"><a href="#win10安装错误" aria-hidden="true" class="header-anchor">#</a> Win10安装错误</h2> <p>执行 <code>cd ~/Homestead &amp;&amp; vagrant up</code> 开启虚拟机出现以下错误</p> <div class="language- extra-class"><pre class="language-text"><code>Timed out while waiting for the machine to boot. This means that
Vagrant was unable to communicate with the guest machine within
the configured (&quot;config.vm.boot_timeout&quot; value) time period.

If you look above, you should be able to see the error(s) that
Vagrant had when attempting to connect to the machine. These errors
are usually good hints as to what may be wrong.
...
</code></pre></div><p>进入你的BIOS，然后将virtualization（CPU虚拟化）设置为enable即可</p> <p>BIOS界面：Configuratio &gt; Intel Virtual Technology &gt; Enabled</p> <p><img src="/assets/img/image-20180629160604023.c1dc9133.png" alt="image-20180629160604023"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/houdunwang/coding/edit/master/docs/environment/Homestead Windows.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/6/2019, 8:21:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/environment/homestead Mac.html" class="prev">
          homestead Mac
        </a></span> <span class="next"><a href="/environment/phpstorm.html">
          phpstorm
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ed0d5635.js" defer></script><script src="/assets/js/2.981a9de6.js" defer></script><script src="/assets/js/15.3731fe8d.js" defer></script>
  </body>
</html>
