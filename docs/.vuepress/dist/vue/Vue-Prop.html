<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深入掌握Vue.js 中的Prop | 后盾人</title>
    <meta name="description" content="在线文档库">
    
    
    <link rel="preload" href="/code/assets/css/0.styles.fcb1d57d.css" as="style"><link rel="preload" href="/code/assets/js/app.bca2b3d0.js" as="script"><link rel="preload" href="/code/assets/js/2.981a9de6.js" as="script"><link rel="preload" href="/code/assets/js/54.7674e5b7.js" as="script"><link rel="prefetch" href="/code/assets/js/10.a80187a9.js"><link rel="prefetch" href="/code/assets/js/11.73e0c7ef.js"><link rel="prefetch" href="/code/assets/js/12.a8a0da58.js"><link rel="prefetch" href="/code/assets/js/13.d78db245.js"><link rel="prefetch" href="/code/assets/js/14.2701c7ee.js"><link rel="prefetch" href="/code/assets/js/15.3731fe8d.js"><link rel="prefetch" href="/code/assets/js/16.cccb1964.js"><link rel="prefetch" href="/code/assets/js/17.e5012aba.js"><link rel="prefetch" href="/code/assets/js/18.12da54a5.js"><link rel="prefetch" href="/code/assets/js/19.73b7fa43.js"><link rel="prefetch" href="/code/assets/js/20.46b91d6b.js"><link rel="prefetch" href="/code/assets/js/21.e2a46793.js"><link rel="prefetch" href="/code/assets/js/22.eff1a377.js"><link rel="prefetch" href="/code/assets/js/23.23839513.js"><link rel="prefetch" href="/code/assets/js/24.2947ae10.js"><link rel="prefetch" href="/code/assets/js/25.d7784a74.js"><link rel="prefetch" href="/code/assets/js/26.a4779340.js"><link rel="prefetch" href="/code/assets/js/27.e6ac6cf6.js"><link rel="prefetch" href="/code/assets/js/28.8dbfd7da.js"><link rel="prefetch" href="/code/assets/js/29.52e7f28b.js"><link rel="prefetch" href="/code/assets/js/3.5c8057d9.js"><link rel="prefetch" href="/code/assets/js/30.0bc3e9a7.js"><link rel="prefetch" href="/code/assets/js/31.72fd5fdd.js"><link rel="prefetch" href="/code/assets/js/32.da4abfea.js"><link rel="prefetch" href="/code/assets/js/33.7b816751.js"><link rel="prefetch" href="/code/assets/js/34.8e7da4bc.js"><link rel="prefetch" href="/code/assets/js/35.92e12cd2.js"><link rel="prefetch" href="/code/assets/js/36.c7d0b613.js"><link rel="prefetch" href="/code/assets/js/37.e449b9ce.js"><link rel="prefetch" href="/code/assets/js/38.0cb50ad7.js"><link rel="prefetch" href="/code/assets/js/39.a522b15e.js"><link rel="prefetch" href="/code/assets/js/4.523d56bd.js"><link rel="prefetch" href="/code/assets/js/40.60a1c2e9.js"><link rel="prefetch" href="/code/assets/js/41.6e042fe8.js"><link rel="prefetch" href="/code/assets/js/42.07e10eb3.js"><link rel="prefetch" href="/code/assets/js/43.402e7456.js"><link rel="prefetch" href="/code/assets/js/44.a5459a22.js"><link rel="prefetch" href="/code/assets/js/45.aedf13f7.js"><link rel="prefetch" href="/code/assets/js/46.ff58a42c.js"><link rel="prefetch" href="/code/assets/js/47.8413bced.js"><link rel="prefetch" href="/code/assets/js/48.40fd4e3d.js"><link rel="prefetch" href="/code/assets/js/49.1358bea7.js"><link rel="prefetch" href="/code/assets/js/5.69242544.js"><link rel="prefetch" href="/code/assets/js/50.2a32cb2f.js"><link rel="prefetch" href="/code/assets/js/51.8018c74c.js"><link rel="prefetch" href="/code/assets/js/52.2c4bfe2d.js"><link rel="prefetch" href="/code/assets/js/53.97b3c978.js"><link rel="prefetch" href="/code/assets/js/55.9f385dd8.js"><link rel="prefetch" href="/code/assets/js/56.1fd05224.js"><link rel="prefetch" href="/code/assets/js/57.17dbac44.js"><link rel="prefetch" href="/code/assets/js/58.2928ef92.js"><link rel="prefetch" href="/code/assets/js/59.4374057e.js"><link rel="prefetch" href="/code/assets/js/6.85d87b30.js"><link rel="prefetch" href="/code/assets/js/60.1103a418.js"><link rel="prefetch" href="/code/assets/js/7.f93228a2.js"><link rel="prefetch" href="/code/assets/js/8.fcbd293b.js"><link rel="prefetch" href="/code/assets/js/9.708803d7.js">
    <link rel="stylesheet" href="/code/assets/css/0.styles.fcb1d57d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/code/" class="home-link router-link-active"><!----> <span class="site-name">后盾人</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档列表</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/php/1 前言.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/code/linux/ubuntu.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/code/environment/composer.html" class="nav-link">环境与软件</a></li><li class="dropdown-item"><!----> <a href="/code/docker/laradock.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/code/git/git.html" class="nav-link">GIT</a></li><li class="dropdown-item"><!----> <a href="/code/laravel/Laravel.html" class="nav-link">Laravel</a></li><li class="dropdown-item"><!----> <a href="/code/hdcms/HDCMS.html" class="nav-link">HDCMS</a></li></ul></div></div><div class="nav-item"><a href="https://www.houdunren.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.houdunren.com/edu/front/live" target="_blank" rel="noopener noreferrer" class="nav-link external">
  八点直播
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/houdunwang/coding" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档列表</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/php/1 前言.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/code/linux/ubuntu.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/code/environment/composer.html" class="nav-link">环境与软件</a></li><li class="dropdown-item"><!----> <a href="/code/docker/laradock.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/code/git/git.html" class="nav-link">GIT</a></li><li class="dropdown-item"><!----> <a href="/code/laravel/Laravel.html" class="nav-link">Laravel</a></li><li class="dropdown-item"><!----> <a href="/code/hdcms/HDCMS.html" class="nav-link">HDCMS</a></li></ul></div></div><div class="nav-item"><a href="https://www.houdunren.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.houdunren.com/edu/front/live" target="_blank" rel="noopener noreferrer" class="nav-link external">
  八点直播
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/houdunwang/coding" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="深入掌握vue-js-中的prop"><a href="#深入掌握vue-js-中的prop" aria-hidden="true" class="header-anchor">#</a> 深入掌握Vue.js 中的Prop</h1> <blockquote><p>向军大叔 @ <a href="http://www.aoxiangjun.com" target="_blank" rel="noopener noreferrer">aoxiangjun.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>prop是向了组件传递数据的机制，但很多同学对他不是很了解。向军大叔通过实例详细讲解一下正确的使用方法。</p> <p>下面的代码是绑定数据的最简单方法</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;input v-model=&quot;content&quot;/&gt;
</code></pre></div><p>他的原理是：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;input :value=&quot;content&quot; @input=&quot;content = $event.target.value&quot;/&gt;
</code></pre></div><p>即当我们修改表单（表单可以理解为一个子组件）时，表单使用</p> <div class="language- extra-class"><pre class="language-text"><code>@change=&quot;$emit('input',$event)&quot;
</code></pre></div><p>触发父级组件的input事件，并将表单实例传递给父级元素，父级元素通过 <code>$event</code> 获取子组件的<code>value</code> 值，并赋予父组件的 content 属性。</p> <p>上面是对 v-model 指令的运行机制讲解，对这方面知识了解后，我们可以对自定义的组件使用 <code>v-model</code> 以达到父子组件数据模拟双向同步的结果。</p> <h2 id="实操"><a href="#实操" aria-hidden="true" class="header-anchor">#</a> 实操</h2> <p>下面我们通过一个markdown编辑器插件，并使用上面的原理达到数据双向同步。</p> <p>开发环境是大叔在 <code>laravel5.7</code> 框架中完成，因为laravel本身内置对vue.js的支持。</p> <h3 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h3> <div class="language- extra-class"><pre class="language-text"><code>cnpm install mavon-editor --save
</code></pre></div><h3 id="编辑器组件"><a href="#编辑器组件" aria-hidden="true" class="header-anchor">#</a> 编辑器组件</h3> <p>创建组件 <code>resource/js/components/MarkdownEditorComponent.vue</code> ，主要是定义编辑器插件。</p> <p>其中声明的 prop value用于接收父组件数据，其他定义了 <code>@change=&quot;$emit('input',$event)&quot;</code> 方法处罚父组件的 input 事件（这就是大叔带大家上面分析的业务）。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
    &lt;div&gt;
        &lt;mavon-editor ref=&quot;md&quot; v-model=&quot;content&quot; :toolbars=&quot;toolbars&quot; @imgAdd=&quot;$imgAdd&quot; @change=&quot;$emit('input',$event)&quot;/&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
    import 'mavon-editor/dist/css/index.css';
    import {mavonEditor} from 'mavon-editor'
    export default {
        props: [
            'value'
        ],
        components: {
            mavonEditor
        },
        methods: {
            // 绑定@imgAdd event
            $imgAdd(pos, $file) {
                // 第一步.将图片上传到服务器.
                let formdata = new FormData();
                formdata.append('file', $file);
                axios({
                    url: 'http://hdcms.test/common/upload/upload',
                    method: 'post',
                    data: formdata,
                    headers: {'Content-Type': 'multipart/form-data'},
                }).then((url) =&gt; {
                    this.$refs.md.$img2Url(pos, url.data.file);
                })
            }
        },
        data() {
            return {
                content: this.value,
                toolbars: {
                    bold: true, // 粗体
                    italic: true, // 斜体
                    header: true, // 标题
                    underline: true, // 下划线
                    strikethrough: true, // 中划线
                    mark: true, // 标记
                    superscript: false, // 上角标
                    subscript: false, // 下角标
                    quote: true, // 引用
                    ol: true, // 有序列表
                    ul: true, // 无序列表
                    link: true, // 链接
                    imagelink: true, // 图片链接
                    code: true, // code
                    table: true, // 表格
                    fullscreen: true, // 全屏编辑
                    readmodel: true, // 沉浸式阅读
                    htmlcode: true, // 展示html源码
                    help: true, // 帮助
                    /* 1.3.5 */
                    undo: true, // 上一步
                    redo: true, // 下一步
                    trash: true, // 清空
                    save: false, // 保存（触发events中的save事件）
                    /* 1.4.2 */
                    navigation: true, // 导航目录
                    /* 2.1.8 */
                    alignleft: true, // 左对齐
                    aligncenter: true, // 居中
                    alignright: true, // 右对齐
                    /* 2.2.1 */
                    subfield: true, // 单双栏模式
                    preview: true, // 预览
                }
            }
        }
    }
&lt;/script&gt;
</code></pre></div><p>在 <code>resources/js/app.js</code> 添加内容如下</p> <div class="language- extra-class"><pre class="language-text"><code>...
Vue.component('edit', require('./components/EditComponent.vue'));
...
</code></pre></div><h3 id="使用编辑器"><a href="#使用编辑器" aria-hidden="true" class="header-anchor">#</a> 使用编辑器</h3> <p>现在我们在父组件 <code>/components/EditComponent.vue</code> 中使用定义的编辑器组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;markdown-editor v-model=&quot;value&quot;/&gt;
        &lt;!--观察数据同步--&gt;
		&lt;p&gt;{{value}}&lt;/p&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
	#引入组件
    import MarkdownEditor from './MarkdownEditorComponent'
    export default {
        components:{
        	#引入组件
            'markdown-editor':MarkdownEditor
        },
        data(){
            return {
                value:'后盾人@向军大叔'
            }
        },
        mounted() {
            console.log('Component mounted.')
        }
    }
&lt;/script&gt;
</code></pre></div><p>结果如下：</p> <p><img src="assets/image-20181118220416359.png" alt="image-20181118220416359"></p> <h3 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h3> <p>总结一下使用 v-model 的技巧</p> <ol><li>子组件数据使用 value 属性</li> <li>子组件当数据更新时，使用 <code>$emit</code> 方法调用父组件的 <code>input</code> 事件</li></ol> <p>当然父组件使用 v-model 后，我们就不需要声明 @input 事件了，因为 v-model 就包含处理 input 事件。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/houdunwang/coding/edit/master/docs/vue/Vue-Prop.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/6/2019, 8:37:16 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/code/assets/js/app.bca2b3d0.js" defer></script><script src="/code/assets/js/2.981a9de6.js" defer></script><script src="/code/assets/js/54.7674e5b7.js" defer></script>
  </body>
</html>
