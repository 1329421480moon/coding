<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小程序 | 后盾人</title>
    <meta name="description" content="在线文档库">
    
    
    <link rel="preload" href="/code/assets/css/0.styles.fa7d3b63.css" as="style"><link rel="preload" href="/code/assets/js/app.b1dc9bb7.js" as="script"><link rel="preload" href="/code/assets/js/2.981a9de6.js" as="script"><link rel="preload" href="/code/assets/js/57.17dbac44.js" as="script"><link rel="prefetch" href="/code/assets/js/10.6104a036.js"><link rel="prefetch" href="/code/assets/js/11.6a6ea46d.js"><link rel="prefetch" href="/code/assets/js/12.2b071dc3.js"><link rel="prefetch" href="/code/assets/js/13.b30b4a31.js"><link rel="prefetch" href="/code/assets/js/14.2701c7ee.js"><link rel="prefetch" href="/code/assets/js/15.3731fe8d.js"><link rel="prefetch" href="/code/assets/js/16.cccb1964.js"><link rel="prefetch" href="/code/assets/js/17.0c78aba7.js"><link rel="prefetch" href="/code/assets/js/18.9ee5dfb5.js"><link rel="prefetch" href="/code/assets/js/19.e5834a4c.js"><link rel="prefetch" href="/code/assets/js/20.46b91d6b.js"><link rel="prefetch" href="/code/assets/js/21.e2a46793.js"><link rel="prefetch" href="/code/assets/js/22.4dd509ac.js"><link rel="prefetch" href="/code/assets/js/23.eb79e2fc.js"><link rel="prefetch" href="/code/assets/js/24.2976acc6.js"><link rel="prefetch" href="/code/assets/js/25.8e7ea76e.js"><link rel="prefetch" href="/code/assets/js/26.a4779340.js"><link rel="prefetch" href="/code/assets/js/27.b6cada7e.js"><link rel="prefetch" href="/code/assets/js/28.62b470b1.js"><link rel="prefetch" href="/code/assets/js/29.ec78c6a8.js"><link rel="prefetch" href="/code/assets/js/3.9f639b6d.js"><link rel="prefetch" href="/code/assets/js/30.f93bcc6f.js"><link rel="prefetch" href="/code/assets/js/31.bed3dc0d.js"><link rel="prefetch" href="/code/assets/js/32.da4abfea.js"><link rel="prefetch" href="/code/assets/js/33.ca2c5efa.js"><link rel="prefetch" href="/code/assets/js/34.8e7da4bc.js"><link rel="prefetch" href="/code/assets/js/35.94b62e3a.js"><link rel="prefetch" href="/code/assets/js/36.1ccc35ad.js"><link rel="prefetch" href="/code/assets/js/37.e449b9ce.js"><link rel="prefetch" href="/code/assets/js/38.8b09dab6.js"><link rel="prefetch" href="/code/assets/js/39.57ee1649.js"><link rel="prefetch" href="/code/assets/js/4.523d56bd.js"><link rel="prefetch" href="/code/assets/js/40.60a1c2e9.js"><link rel="prefetch" href="/code/assets/js/41.da9fa7b6.js"><link rel="prefetch" href="/code/assets/js/42.a29dc03a.js"><link rel="prefetch" href="/code/assets/js/43.52665ce2.js"><link rel="prefetch" href="/code/assets/js/44.a5459a22.js"><link rel="prefetch" href="/code/assets/js/45.aedf13f7.js"><link rel="prefetch" href="/code/assets/js/46.d82a8cac.js"><link rel="prefetch" href="/code/assets/js/47.8413bced.js"><link rel="prefetch" href="/code/assets/js/48.7b2d2893.js"><link rel="prefetch" href="/code/assets/js/49.673b0851.js"><link rel="prefetch" href="/code/assets/js/5.2147cd90.js"><link rel="prefetch" href="/code/assets/js/50.2a32cb2f.js"><link rel="prefetch" href="/code/assets/js/51.8018c74c.js"><link rel="prefetch" href="/code/assets/js/52.2c4bfe2d.js"><link rel="prefetch" href="/code/assets/js/53.d5ce0682.js"><link rel="prefetch" href="/code/assets/js/54.a240c9ec.js"><link rel="prefetch" href="/code/assets/js/55.0b59cfa9.js"><link rel="prefetch" href="/code/assets/js/56.7d2b0631.js"><link rel="prefetch" href="/code/assets/js/58.7733e313.js"><link rel="prefetch" href="/code/assets/js/59.e9e56392.js"><link rel="prefetch" href="/code/assets/js/6.8a327dfe.js"><link rel="prefetch" href="/code/assets/js/60.1103a418.js"><link rel="prefetch" href="/code/assets/js/7.f93228a2.js"><link rel="prefetch" href="/code/assets/js/8.3b5f76b1.js"><link rel="prefetch" href="/code/assets/js/9.7eac0987.js">
    <link rel="stylesheet" href="/code/assets/css/0.styles.fa7d3b63.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/code/" class="home-link router-link-active"><!----> <span class="site-name">后盾人</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档列表</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/php/1 前言.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/code/linux/ubuntu.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/code/environment/composer.html" class="nav-link">环境与软件</a></li><li class="dropdown-item"><!----> <a href="/code/docker/laradock.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/code/git/git.html" class="nav-link">GIT</a></li><li class="dropdown-item"><!----> <a href="/code/laravel/Laravel.html" class="nav-link">Laravel</a></li><li class="dropdown-item"><!----> <a href="/code/hdcms/HDCMS.html" class="nav-link">HDCMS</a></li></ul></div></div><div class="nav-item"><a href="https://www.houdunren.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.houdunren.com/edu/front/live" target="_blank" rel="noopener noreferrer" class="nav-link external">
  八点直播
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/houdunwang/coding" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档列表</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code/php/1 前言.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/code/linux/ubuntu.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/code/environment/composer.html" class="nav-link">环境与软件</a></li><li class="dropdown-item"><!----> <a href="/code/docker/laradock.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/code/git/git.html" class="nav-link">GIT</a></li><li class="dropdown-item"><!----> <a href="/code/laravel/Laravel.html" class="nav-link">Laravel</a></li><li class="dropdown-item"><!----> <a href="/code/hdcms/HDCMS.html" class="nav-link">HDCMS</a></li></ul></div></div><div class="nav-item"><a href="https://www.houdunren.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  在线学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.houdunren.com/edu/front/live" target="_blank" rel="noopener noreferrer" class="nav-link external">
  八点直播
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/houdunwang/coding" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="小程序"><a href="#小程序" aria-hidden="true" class="header-anchor">#</a> 小程序</h2> <blockquote><p>后盾人 www.houdunren.com  作者：<a href="http://www.aoxiangjun.com" target="_blank" rel="noopener noreferrer">向军大叔<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="申请帐号"><a href="#申请帐号" aria-hidden="true" class="header-anchor">#</a> 申请帐号</h3> <p>点击 <a href="https://mp.weixin.qq.com/wxopen/waregister?action=step1" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/wxopen/waregister?action=step1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 根据指引填写信息和提交相应的资料，就可以拥有自己的小程序帐号。</p> <p><img src="assets/image-20180811222908857.png" alt="image-20180811222908857"></p> <p>注册后登录 https://mp.weixin.qq.com 来开始学习小程序开发。</p> <h3 id="测试帐号"><a href="#测试帐号" aria-hidden="true" class="header-anchor">#</a> 测试帐号</h3> <p>为方便开发者开发和体验小程序、小游戏的各种能力，开发者可以申请小程序或小游戏的测试号，并使用此帐号在开发者工具创建项目进行开发测试，以及真机预览体验。</p> <p>https://developers.weixin.qq.com/miniprogram/dev/devtools/sandbox.html</p> <h2 id="开发环境"><a href="#开发环境" aria-hidden="true" class="header-anchor">#</a> 开发环境</h2> <h3 id="文档手册"><a href="#文档手册" aria-hidden="true" class="header-anchor">#</a> 文档手册</h3> <p>下面是小程序开发中用到的文档列表</p> <p>官方文档：https://developers.weixin.qq.com/miniprogram/dev/</p> <p>wepyjs：https://tencent.github.io/wepy/document.html#/</p> <p>weui：https://github.com/wepyjs/wepy-weui-demo</p> <h3 id="调试工具"><a href="#调试工具" aria-hidden="true" class="header-anchor">#</a> 调试工具</h3> <p>https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html</p> <h3 id="phpstorm"><a href="#phpstorm" aria-hidden="true" class="header-anchor">#</a> PHPSTORM</h3> <p>文件后缀为<code>.wpy</code>，可共用<code>Vue</code>的高亮规则，但需要手动设置。下面提供一些常见IDE或编辑器中实现代码高亮的相关设置步骤以供参考。</p> <p><strong>WebStorm/PhpStorm</strong></p> <ol><li>打开<code>Settings</code>，搜索<code>Plugins</code>，搜索<code>Vue.js</code>插件并安装。</li> <li>打开<code>Settings</code>，搜索<code>File Types</code>，找到<code>Vue.js Template</code>，在<code>Registered Patterns</code>添加<code>*.wpy</code>，即可高亮。</li></ol> <blockquote><p>其他开发工具配置请查看官网文档</p></blockquote> <h2 id="wepy"><a href="#wepy" aria-hidden="true" class="header-anchor">#</a> WePY</h2> <p>WePY是高效的小程序开发框架。</p> <h3 id="为什么要选择wepy？"><a href="#为什么要选择wepy？" aria-hidden="true" class="header-anchor">#</a> 为什么要选择WePY？</h3> <p>WePY 框架在开发过程中参考了 Vue 等现有框架的一些语法风格和功能特性，对原生小程序的开发模式进行了再次封装，更贴近于 MVVM 架构模式, 并支持ES6/7的一些新特性。以下是使用 WePY 前后的代码对比与组件化示例。</p> <p>具体请查看 <a href="https://tencent.github.io/wepy/index.html" target="_blank" rel="noopener noreferrer">WePY官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="安装配置"><a href="#安装配置" aria-hidden="true" class="header-anchor">#</a> 安装配置</h3> <p>全局安装或更新WePY命令行工具</p> <div class="language- extra-class"><pre class="language-text"><code>npm install wepy-cli -g
</code></pre></div><p><strong>创建项目</strong></p> <p>wepy提供了官网和基于GitHub项目的多个模板选择，通过 <code>wepy list</code> 查看模板列表</p> <p><img src="assets/image-20180812183140548.png" alt="image-20180812183140548"></p> <div class="language- extra-class"><pre class="language-text"><code>wepy init standard hdcms-article
</code></pre></div><p><img src="assets/image-20180811224509798.png" alt="image-20180811224509798"></p> <p><strong>切换至项目目录</strong></p> <div class="language- extra-class"><pre class="language-text"><code>cd hdcms-article
</code></pre></div><p><strong>安装依赖</strong></p> <div class="language- extra-class"><pre class="language-text"><code>cnpm install
</code></pre></div><p><strong>开启实时编译</strong></p> <div class="language- extra-class"><pre class="language-text"><code>wepy build --watch
</code></pre></div><h2 id="weui"><a href="#weui" aria-hidden="true" class="header-anchor">#</a> WEUI</h2> <p>下载为小程序开发的WEUI样式库 https://github.com/wepyjs/wepy-weui-demo</p> <div class="language- extra-class"><pre class="language-text"><code>git clone git@github.com:wepyjs/wepy-weui-demo.git
</code></pre></div><p>复制到小程序项目</p> <div class="language- extra-class"><pre class="language-text"><code>cp -r wepy-weui-demo/src/style hdcms-article/src/style
</code></pre></div><p>在 <code>src/app.wpy</code> 文件中引入样式文件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;style lang=&quot;less&quot;&gt;
@import 'style/weui.less';
...
</code></pre></div><h2 id="菜单栏"><a href="#菜单栏" aria-hidden="true" class="header-anchor">#</a> 菜单栏</h2> <p>修改 <code>app.wpy</code> 文件内容如下，下面使用的字体是从 <code>http://www.iconfont.cn/</code> 下载的</p> <div class="language- extra-class"><pre class="language-text"><code>tabBar: {
        list: [{
          pagePath: 'pages/index',
          text: '首页',
          iconPath: 'images/home.png',
          selectedIconPath: 'images/home-active.png'
	}, {
          pagePath: 'pages/category',
          text: '栏目',
          iconPath: 'images/category.png',
          selectedIconPath: 'images/category-active.png'
	}]
}
</code></pre></div><p>需要保证 <code>pathPath</code>中的页面已经在上面的 <code>pages</code> 选项中定义好。</p> <h2 id="幻灯片"><a href="#幻灯片" aria-hidden="true" class="header-anchor">#</a> 幻灯片</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
    &lt;swiper indicator-dots=&quot;true&quot; autoplay=&quot;true&quot; interval=&quot;3000&quot;&gt;
        &lt;repeat for=&quot;{{imgUrls}}&quot; key=&quot;index&quot; index=&quot;index&quot; item=&quot;item&quot;&gt;
            &lt;swiper-item&gt;
                &lt;navigator url=&quot;/pages/article?id={{item.id}}&quot; hover-class=&quot;navigator-hover&quot;&gt;
                    &lt;image src=&quot;{{item.thumb}}&quot; class=&quot;slide-image&quot; width=&quot;355&quot; height=&quot;150&quot;/&gt;
                &lt;/navigator&gt;
            &lt;/swiper-item&gt;
        &lt;/repeat&gt;
    &lt;/swiper&gt;
&lt;/template&gt;

&lt;script&gt;
  import wepy from 'wepy'

  export default class Index extends wepy.page {
    config = {
      navigationBarTitleText: '后盾人'
    }
    data = {
      imgUrls: [
        {id: 1, thumb: 'http://img02.tooopen.com/images/20150928/tooopen_sy_143912755726.jpg'},
        {id: 1, thumb: 'http://img06.tooopen.com/images/20160818/tooopen_sy_175866434296.jpg'},
        {id: 1, thumb: 'http://img06.tooopen.com/images/20160818/tooopen_sy_175833047715.jpg'}
      ]
    }
  }
&lt;/script&gt;
</code></pre></div><p><strong>说明</strong></p> <ul><li>文档 https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html</li> <li>使用wepy就不能使用官方框架的 <code>wx:for</code> 而要使用 <code>repeat</code> 参考文档：https://tencent.github.io/wepy/document.html#/?id=%E7%BB%84%E4%BB%B6%E7%9A%84%E5%BE%AA%E7%8E%AF%E6%B8%B2%E6%9F%93</li></ul> <h2 id="列表组件"><a href="#列表组件" aria-hidden="true" class="header-anchor">#</a> 列表组件</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;!--文章列表--&gt;
    &lt;view class=&quot;page__bd&quot;&gt;
        &lt;view class=&quot;weui-panel weui-panel_access&quot;&gt;
            &lt;view class=&quot;weui-panel__hd&quot;&gt;最新文章&lt;/view&gt;
            &lt;view class=&quot;weui-panel__bd&quot;&gt;
                &lt;navigator url=&quot;/pages/article?id=1&quot; class=&quot;weui-media-box weui-media-box_appmsg&quot; hover-class=&quot;weui-cell_active&quot;&gt;
                    &lt;view class=&quot;weui-media-box__hd weui-media-box__hd_in-appmsg&quot;&gt;
                        &lt;image class=&quot;weui-media-box__thumb&quot; src=&quot;http://www.houdunwang.com/attachment/2018/05/25/56711527242221.jpg&quot;/&gt;
                    &lt;/view&gt;
                    &lt;view class=&quot;weui-media-box__bd weui-media-box__bd_in-appmsg&quot;&gt;
                        &lt;view class=&quot;weui-media-box__title&quot;&gt;标题一111222&lt;/view&gt;
                        &lt;view class=&quot;weui-media-box__desc&quot;&gt;由各种物质组成的巨型球状天体，叫做星球。星球有一定的形状，有自己的运行轨道。&lt;/view&gt;
                    &lt;/view&gt;
                &lt;/navigator&gt;
                &lt;navigator url=&quot;&quot; class=&quot;weui-media-box weui-media-box_appmsg&quot; hover-class=&quot;weui-cell_active&quot;&gt;
                    &lt;view class=&quot;weui-media-box__hd weui-media-box__hd_in-appmsg&quot;&gt;
                        &lt;image class=&quot;weui-media-box__thumb&quot; src=&quot;{{icon60}}&quot;/&gt;
                    &lt;/view&gt;
                    &lt;view class=&quot;weui-media-box__bd weui-media-box__bd_in-appmsg&quot;&gt;
                        &lt;view class=&quot;weui-media-box__title&quot;&gt;标题二&lt;/view&gt;
                        &lt;view class=&quot;weui-media-box__desc&quot;&gt;由各种物质组成的巨型球状天体，叫做星球。星球有一定的形状，有自己的运行轨道。&lt;/view&gt;
                    &lt;/view&gt;
                &lt;/navigator&gt;
            &lt;/view&gt;
        &lt;/view&gt;
    &lt;/view&gt;
</code></pre></div><p>上例中的 <code>&lt;navigator url=&quot;/pages/article?id=1&quot;</code>说明如下</p> <p>navigator 标签用于定义导航使用 ，url参数指跳转地址，id为传递给article.wpy页面的参数。</p> <h2 id="获取参数"><a href="#获取参数" aria-hidden="true" class="header-anchor">#</a> 获取参数</h2> <p>下面是当点击幻灯片时跳到到 <code>pages/article.wpy</code> 页面时获取参数</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script&gt;
  import wepy from 'wepy'

  export default class Article extends wepy.page {
    onLoad = function (options) {
      console.log(options)
    }
  }
&lt;/script&gt;
</code></pre></div><p><code>options</code> 包含了包的参数列表</p> <h2 id="页面事件"><a href="#页面事件" aria-hidden="true" class="header-anchor">#</a> 页面事件</h2> <p>https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html</p> <p>下面列出几个常用的页面事件</p> <ul><li>onLoad(Object query) 页面加载时触发。<code>一个页面只会调用一次</code>，可以在 onLoad 的参数中获取打开当前页面路径中的参数。</li> <li>onShow()页面显示/切入前台时触发。</li></ul> <h2 id="自定义服务"><a href="#自定义服务" aria-hidden="true" class="header-anchor">#</a> 自定义服务</h2> <h3 id="请求接口服务"><a href="#请求接口服务" aria-hidden="true" class="header-anchor">#</a> 请求接口服务</h3> <p>定义 <code>services/api.js</code> 文件内容如下：</p> <div class="language- extra-class"><pre class="language-text"><code>import wepy from 'wepy'

const host = 'http://www.houdunren.com'
const util = {
  // 异步请求
  api: async (options) =&gt; {
    wepy.showLoading({title: '请求中..'})
    options.url = host + '/' + options.url
    let response = await wepy.request(options)
    // 上面的 await 请求成功后才会执行页面的代码
    setTimeout(function () {
      wepy.hideLoading()
    }, 3000)

    return response
  }
}
export default util

</code></pre></div><h2 id="表单提交"><a href="#表单提交" aria-hidden="true" class="header-anchor">#</a> 表单提交</h2> <p>下面是一个表单示例</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;style lang=&quot;less&quot;&gt;
    view.send {
        margin: 20px;
    }
&lt;/style&gt;
&lt;template&gt;
    &lt;form @submit=&quot;submit&quot;&gt;
        &lt;view class=&quot;form&quot;&gt;
            &lt;view class=&quot;weui-panel weui-panel_access&quot;&gt;
                &lt;view class=&quot;weui-panel__hd&quot;&gt;会员登录&lt;/view&gt;
                &lt;view class=&quot;weui-panel__bd&quot;&gt;
                    &lt;view class=&quot;weui-cell weui-cell_input&quot;&gt;
                        &lt;view class=&quot;weui-cell__hd&quot;&gt;
                            &lt;view class=&quot;weui-label&quot;&gt;邮箱&lt;/view&gt;
                        &lt;/view&gt;
                        &lt;view class=&quot;weui-cell__bd&quot;&gt;
                            &lt;input class=&quot;weui-input&quot; name=&quot;email&quot;/&gt;
                        &lt;/view&gt;
                    &lt;/view&gt;
                    &lt;view class=&quot;weui-cell weui-cell_input&quot;&gt;
                        &lt;view class=&quot;weui-cell__hd&quot;&gt;
                            &lt;view class=&quot;weui-label&quot;&gt;密码&lt;/view&gt;
                        &lt;/view&gt;
                        &lt;view class=&quot;weui-cell__bd&quot;&gt;
                            &lt;input class=&quot;weui-input&quot; name=&quot;password&quot;/&gt;
                        &lt;/view&gt;
                    &lt;/view&gt;

                &lt;/view&gt;
            &lt;/view&gt;
            &lt;view class=&quot;page__bd page__bd_spacing send&quot;&gt;
                &lt;button class=&quot;weui-btn&quot; type=&quot;primary&quot; form-type=&quot;submit&quot;&gt;登录&lt;/button&gt;
            &lt;/view&gt;
        &lt;/view&gt;
    &lt;/form&gt;
&lt;/template&gt;

&lt;script&gt;
  import wepy from 'wepy'

  export default class Login extends wepy.page {
    methods = {
      submit(e) {
        #这里保存了表单数据
        let formData = e.detail.value
        if (!formData.email || !formData.password) {
          wepy.showToast({
            title: '邮箱或密码不能为空',
            icon: 'none',
            duration: 2000
          })
          return false
        }
      }
    }
  }
&lt;/script&gt;
</code></pre></div><h2 id="async-await"><a href="#async-await" aria-hidden="true" class="header-anchor">#</a> async/await</h2> <p>用async/await来发送异步请求，从服务端获取数据，代码很简洁，同时async/await 已经被标准化。</p> <p>首先在app.wpy中使API promise化开启 async/await功能。</p> <div class="language- extra-class"><pre class="language-text"><code>export default class extends wepy.app {
	...
    constructor () {
        super();
        this.use('promisify');
    }
}
</code></pre></div><h2 id="解析html"><a href="#解析html" aria-hidden="true" class="header-anchor">#</a> 解析HTML</h2> <p>对HTML数据我们需要转化为小程序可识别的组件</p> <h3 id="安装-wxparse"><a href="#安装-wxparse" aria-hidden="true" class="header-anchor">#</a> 安装 wxParse</h3> <div class="language- extra-class"><pre class="language-text"><code>git clone https://github.com/icindy/wxParse.git
</code></pre></div><p>复制目录到小程序项目的src目录中</p> <div class="language- extra-class"><pre class="language-text"><code>cp -r wxParse/wxParse hdcms-article/src
</code></pre></div><h3 id="配置"><a href="#配置" aria-hidden="true" class="header-anchor">#</a> 配置</h3> <p>在 <code>app.wpy</code> 中引入</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;style lang=&quot;less&quot;&gt;
  @import &quot;wxParse/wxParse.wxss&quot;;
</code></pre></div><p>具体页面中使用，下面我们在 <code>pages/article.wpy</code> 页面中的定义</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script&gt;
  ...
  //  1） 引入 wxparse.js
  import WxParse from '@/wxParse/wxParse.js'

  export default class Article extends wepy.page {
    data = {
      field: {}
    }
    async onLoad(options) {
      let response = await article.getById(options.id)
      let field = response.data.data
      // 2） 将field.content 转化为小程序可识别内容并定义为content
      //     模板中就要使用content变量显示
      let that = this
      WxParse.wxParse('content', 'html', field.content, that, 5)
      this.field = field
      this.$apply()
    }
  }
&lt;/script&gt;
</code></pre></div><p>模板中使用方法</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;!-- 1） 导入组件--&gt;
  &lt;import src=&quot;../wxParse/wxParse.wxml&quot;/&gt;
  &lt;view class=&quot;title&quot;&gt;{{field.title}}&lt;/view&gt;
  &lt;view class=&quot;content&quot;&gt;
    &lt;!-- 2） 展示数据--&gt;
    &lt;template is=&quot;wxParse&quot; data=&quot;{{wxParseData:content.nodes}}&quot;/&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre></div><h2 id="下拉刷新"><a href="#下拉刷新" aria-hidden="true" class="header-anchor">#</a> 下拉刷新</h2> <p>下面是下拉刷新的操作方法</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;script&gt;
  import wepy from 'wepy'
  import article from '@/services/article'

  export default class Lists extends wepy.page {
    config = {
      // 1) 开启下拉刷新功能
      enablePullDownRefresh: true
    }
   ...
   	// 2) 下拉刷新获取数据
    async onPullDownRefresh() {
      this.page += 1
      await this.getArticles()
      // 停止当前页面下拉刷新
      wepy.stopPullDownRefresh()
    }
   }
</code></pre></div><h2 id="wx-if"><a href="#wx-if" aria-hidden="true" class="header-anchor">#</a> wx:if</h2> <p>当 wx:if 指令为真时显示组件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;form @submit=&quot;login&quot; wx:if=&quot;{{!isLogin}}&quot;&gt;
&lt;/form&gt;
</code></pre></div><h2 id="api"><a href="#api" aria-hidden="true" class="header-anchor">#</a> Api</h2> <p>下面列出常用的小程序API，更多API使用请查看小程序官网。</p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/network-request.html" target="_blank" rel="noopener noreferrer">wx.request(OBJECT)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/data.html#wxsetstorageobject" target="_blank" rel="noopener noreferrer">wx.setStorageSync(KEY,DATA)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/data.html#wxgetstoragesynckey" target="_blank" rel="noopener noreferrer">wx.getStorageSync(KEY)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/data.html#wxremovestoragesynckey" target="_blank" rel="noopener noreferrer">wx.removeStorageSync(KEY)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/api-react.html#wxshowtoastobject" target="_blank" rel="noopener noreferrer">wx.showToast(OBJECT)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/api-react.html#wxhidetoast" target="_blank" rel="noopener noreferrer">wx.hideToast()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/api-react.html#wxshowloadingobject" target="_blank" rel="noopener noreferrer">wx.showLoading(OBJECT)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/api-react.html#wxhideloading" target="_blank" rel="noopener noreferrer">wx.hideLoading()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/pulldown.html#pageonpulldownrefresh" target="_blank" rel="noopener noreferrer">Page.onPullDownRefresh()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui-navigate.html#wxnavigatetoobject" target="_blank" rel="noopener noreferrer">wx.navigateTo(OBJECT)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui-navigate.html#wxredirecttoobject" target="_blank" rel="noopener noreferrer">wx.redirectTo(OBJECT)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui-navigate.html#wxnavigatebackobject" target="_blank" rel="noopener noreferrer">wx.navigateBack(OBJECT)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/houdunwang/coding/edit/master/docs/小程序/miniProgram.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/6/2019, 8:37:16 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/code/assets/js/app.b1dc9bb7.js" defer></script><script src="/code/assets/js/2.981a9de6.js" defer></script><script src="/code/assets/js/57.17dbac44.js" defer></script>
  </body>
</html>
